<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"gqlxj1987.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="DevilKing&#39;s blog">
<meta property="og:url" content="https://gqlxj1987.github.io/page/103/index.html">
<meta property="og:site_name" content="DevilKing&#39;s blog">
<meta property="og:locale">
<meta property="article:author" content="gqlxj1987">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://gqlxj1987.github.io/page/103/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>DevilKing's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">DevilKing's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">冷灯看剑，剑上几分功名？炉香无需计苍生，纵一穿烟逝，万丈云埋，孤阳还照古陵</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/01/26/cnn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/26/cnn/" class="post-title-link" itemprop="url">CNN架构</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-26 16:26:27" itemprop="dateCreated datePublished" datetime="2018-01-26T16:26:27+08:00">2018-01-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CNN/" itemprop="url" rel="index"><span itemprop="name">CNN</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://yq.aliyun.com/articles/363898?spm=5176.100239.bloghomeflow.64.243cef011nwfHp">一文读懂最近流行的CNN架构</a></p>
<ul>
<li><p><strong>为什么CNN模型战胜了传统的计算机视觉方法?</strong></p>
<p>图像分类的传统流程涉及两个模块：</p>
<ul>
<li><p>特征提取    </p>
<p>从原始像素中提取更高级的特征，常用的传统特征报告GIST,HOG,SIFT,LBP等</p>
<p>​</p>
</li>
<li><p>分类</p>
<p>常用的分类模型有SVM,LR,随机森林及决策树</p>
</li>
</ul>
</li>
</ul>
<p>​    流程的一大问题是：特征提取不能根据图像和其他标签进行调整。传统的流程比较好的方法是，使用多种特征提取器，然后组合他们得到一种更好的特征</p>
<p>​    深度学习背后的哲学，没有建立硬编码的特征提取器。它将特征提取和分类两个模块集成一个系统，通过识别图像的特征来进行提取并基于有标签数据进行分类。这样的集成系统就是多层感知机，即有多层神经元密集连接而成的神经网络</p>
<p>​    CNN模型中的两个特点：<strong>神经元间的权重共享和卷积层之间的稀疏连接</strong></p>
<ul>
<li><p><strong>为了理解CNN背后的设计哲学，你可能会问：其目标是什么？</strong></p>
<p>准确度和计算量</p>
</li>
</ul>
<ul>
<li><p><strong>AlexNet</strong></p>
<p>AlexNet采用ReLU激活函数，而不像传统神经网络早期所采用的Tanh或Sigmoid激活函数，<code>f(x)=max(0, x)</code></p>
<p>优势是，训练速度更快，不会出现梯度消失的问题</p>
<p>另一个特点是，其通过在每个全连接层后面加上Dropout层减少了模型的过拟合问题。Dropout层以一定的概率随机的关闭当前层中神经元激活值</p>
</li>
</ul>
<ul>
<li><p><strong>VGG16</strong></p>
<p>VGG16相比AlexNet的一个改进是采用连续的几个3x3的卷积代替AlexNet中的较大卷积核(11x11, 5x5)</p>
</li>
</ul>
<p>​    对于给定的感受野（与输出有关的输入图片的局部大小），采用堆积的小卷积核是优于采用大的卷积核，因为多层非线性层可以增加网络深度来保证学习更复杂的模式，而且代价还比较小（参数更少）。</p>
<p>​    VGG-D，使用了一种块结构: 多次重复使用同一大小的卷积核来提取更复杂和更具有表达性的特征</p>
<ul>
<li><strong>GoogLeNet/Inception</strong></li>
</ul>
<p>​    基于这样的理念：在深度网络中大部分的激活值是不必要的（为0），或者由于相关性是冗余。因为，最高效的深度网络架构应该是激活值之间是稀疏连接，这意味着512个输出特征图是没有必要与所有的512输入特征图相连</p>
<p>​    设计了一种称为inception的模块，使用密集结构来近似一个稀疏的CNN。另一个特点是，使用了一中瓶颈层（实际上就是1x1卷积）来降低计算量</p>
<p>​    另一个特殊设计是最后的卷积层后使用全局均值池化层替换全连接层。所谓全局池化就是在整个2D特征图上取均值</p>
<ul>
<li><strong>ResNet</strong></li>
</ul>
<p>​    从前面可以看到，随着网络深度增加，网络的准确度应该同步增加，当然要注意过拟合问题。但是网络深度增加的一个问题在于这些增加的层是参数更新的信号，因为梯度是从后向前传播的，增加网络深度后，比较靠前的层梯度会很小。</p>
<p>​    这意味着这些层基本上学习停滞了，这就是梯度消失问题。深度网络的第二个问题在于训练，当网络更深时意味着参数空间更大，优化问题变得更难，因此简单地去增加网络深度反而出现更高的训练误差。</p>
<p>​    引入所谓的学习残差的概念，</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/01/26/select-limit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/26/select-limit/" class="post-title-link" itemprop="url">毫秒级实时排序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-26 15:53:26" itemprop="dateCreated datePublished" datetime="2018-01-26T15:53:26+08:00">2018-01-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/sort/" itemprop="url" rel="index"><span itemprop="name">sort</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://yq.aliyun.com/articles/378962?spm=a2c4e.11153940.bloghomeflow.105.FrxURS">实践：几十亿条数据分布在几十个节点上的毫秒级实时排序方法</a></p>
<p><code>select a from tb order by a limit 100, 10;</code></p>
<p><code>对分布在几十个节点上的上亿条数据要求1秒内排序。</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/01/10/golang-tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/10/golang-tips/" class="post-title-link" itemprop="url">Golang Tips</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-10 15:15:16" itemprop="dateCreated datePublished" datetime="2018-01-10T15:15:16+08:00">2018-01-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">golang</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Go-Datastructures-slices"><a href="#Go-Datastructures-slices" class="headerlink" title="Go Datastructures slices"></a>Go Datastructures slices</h3><p><a target="_blank" rel="noopener" href="https://speakerdeck.com/rarchana2001asu/go-datastructure-slices?utm_campaign=CodeTengu&utm_content=buffer2deee&utm_medium=email&utm_source=CodeTengu_111">go datastructures</a></p>
<p>diff between c arrays and go array</p>
<ul>
<li>array name in c is an alias, in go is reference/pointer</li>
<li>c arrays can passed to function as a pointer, but go is pass values</li>
<li>in c, array can not be copied like ar1 = ar2 unless ar1 and ar2 are pointer, but it is possible in go</li>
<li>c array should be freed, go supports garbage collection</li>
</ul>
<p>diff between go array and slice</p>
<ul>
<li>go slice is a 3 word data structure &lt;pointer, length, capacity&gt;</li>
</ul>
<p>slice is a collection of data in contiguous blocks of memory</p>
<p>Nil slice: <code>var slice[] int </code>, empty slice <code>slice:=make([]int, 0)</code> or <code>slice:=[]int&#123;&#125;</code></p>
<p>growing slice -&gt; like java list, factor to grow? no..</p>
<p>growing in slice</p>
<ul>
<li>the append function takes in a source slice and append values and returns a new slice</li>
<li>append always increases the length of the new slice but capacity may or may not increase</li>
</ul>
<p>slice append - third index</p>
<ul>
<li>the third index of the slice restricts the capacity</li>
<li>slice:=source[2:3:4]</li>
<li>by setting the capacity == length, the new slice is forced to detach from source backing array and creates its own backing array</li>
<li>the above technique is used in scenarios where we just want to modify the new slice backing array without changing the source backing array</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	k:=<span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="number">0</span>)</span><br><span class="line">	</span><br><span class="line">	k = <span class="built_in">append</span>(k, <span class="number">1</span>)</span><br><span class="line">	k = <span class="built_in">append</span>(k, <span class="number">2</span>)</span><br><span class="line">	k = <span class="built_in">append</span>(k, <span class="number">3</span>)</span><br><span class="line">	k = <span class="built_in">append</span>(k, <span class="number">4</span>)</span><br><span class="line">	k = <span class="built_in">append</span>(k, <span class="number">5</span>)</span><br><span class="line">	k = <span class="built_in">append</span>(k, <span class="number">6</span>)</span><br><span class="line">	</span><br><span class="line">	t:=k[<span class="number">2</span>:<span class="number">3</span>:<span class="number">3</span>]</span><br><span class="line">	</span><br><span class="line">	fmt.Println(k)</span><br><span class="line">	fmt.Println(t)</span><br><span class="line">	</span><br><span class="line">	t = <span class="built_in">append</span>(t, <span class="number">7</span>)</span><br><span class="line">	</span><br><span class="line">	fmt.Println(k)</span><br><span class="line">	fmt.Println(t)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>the reuslt:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line">[<span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line">[<span class="number">3</span> <span class="number">7</span>]</span><br></pre></td></tr></table></figure>



<p>notice the detach operation</p>
<p>but  what the meaning of the capacity?</p>
<p>passing slices to functions</p>
<p>since only the pointer to the backing array is passed, this is very efficient. whether the size of the backing array is 10 or one million only 24 bytes are passed to function</p>
<h3 id="RFC-Apache-Beam-Go-SDK-design"><a href="#RFC-Apache-Beam-Go-SDK-design" class="headerlink" title="RFC: Apache Beam Go SDK design"></a>RFC: Apache Beam Go SDK design</h3><p><a target="_blank" rel="noopener" href="https://docs.google.com/document/d/1yj0_hxq2J1iestjFUUrm_BVQLsFxQiiqtcFhgodzIgM/mobilebasic?utm_campaign=CodeTengu&utm_medium=email&utm_source=CodeTengu_111">RFC: Apache Beam Go SDK design</a></p>
<p><a target="_blank" rel="noopener" href="https://beam.apache.org/">Apache Beam</a></p>
<p>is an advanced unified programming model, implement batch and streaming data processing jobs that run on any execution engine</p>
<p>weak point:</p>
<ul>
<li>no generics</li>
<li>no function or method overloading</li>
<li>no inheritance</li>
<li>limited reflection and serialization support</li>
<li>no annotation support</li>
</ul>
<p>strong point:</p>
<ul>
<li>first-class functions</li>
<li>full type reflection</li>
<li>multiple return values</li>
<li>and more</li>
</ul>
<h4 id="key-design-points"><a href="#key-design-points" class="headerlink" title="key design points"></a>key design points</h4><ul>
<li><p>natively-typed dofns and other user functions</p>
<p>​</p>
</li>
<li><p>weakly-typed ptransforms that capture arity natively</p>
</li>
</ul>
<ul>
<li>static type checking at pipeline construction time<ul>
<li>kv is implicit. we use multiple arguments and return tuples to represent unfolded KV for DoFns</li>
<li>slide input forms. </li>
<li>simulated generic types. we achieve some of the effect of generics by introducing special ‘universal’ types T,U,… X,Y,Z over interface{}</li>
</ul>
</li>
<li>error handling</li>
</ul>
<h4 id="examples"><a href="#examples" class="headerlink" title="examples"></a>examples</h4><h5 id="model-representation"><a href="#model-representation" class="headerlink" title="model representation"></a>model representation</h5><ul>
<li>Pipeline</li>
<li>Runner</li>
<li>PCollection</li>
<li>Coder</li>
<li>DoFn and other user functions</li>
</ul>
<h5 id="Transforms"><a href="#Transforms" class="headerlink" title="Transforms"></a>Transforms</h5><ul>
<li>Impulse</li>
<li>Create</li>
<li>ParDo family</li>
<li>GroupByKey</li>
<li>Flatten</li>
<li>Combine</li>
<li>Partition</li>
<li>​</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/01/10/git-flow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/10/git-flow/" class="post-title-link" itemprop="url">Git Flow</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-10 11:39:52" itemprop="dateCreated datePublished" datetime="2018-01-10T11:39:52+08:00">2018-01-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="http://nelson.logdown.com/posts/2017/12/29/why-git-flow-may-be-not-for-you?utm_campaign=CodeTengu&utm_medium=email&utm_source=CodeTengu_111">Git flow可能不适合你</a></p>
<p><a target="_blank" rel="noopener" href="http://nvie.com/posts/a-successful-git-branching-model/">git flow model</a></p>
<p><img src="/images/git-model@2x.png" alt="Git flow"></p>
<p>调整后的git-flow流部分：</p>
<ul>
<li>master分支， 正式发行的tag部分，作为版本库方式</li>
<li>develop分支，最新的</li>
<li>task分支，feature or issue fix,  from develop, 通过后，rebase到最新的develop，再<code>--no-ff</code>的merge回develop，随后这个task就可以砍掉了</li>
<li>release分支，from develop部分，如果有修改的话，会merge回develop部分，</li>
</ul>
<p>随后的一些操作：</p>
<ul>
<li>针对master部分，进行打tag部分，也就是从release部分，直接复制过去，而不是merge的方式，随后，删除掉release分支</li>
</ul>
<p>针对现有的android部分的开发流程的问题：</p>
<ul>
<li>现在master分支实际上是类似于develop分支</li>
<li>task分支无，采用pr的方式来进行</li>
<li>release分支，实际上类似于现在weekly-xx分支</li>
<li>但是master分支，没有，没有相关的tag部分，无法进行版本的查询</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/01/10/golang-return/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/10/golang-return/" class="post-title-link" itemprop="url">Golang Return</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-10 10:21:11" itemprop="dateCreated datePublished" datetime="2018-01-10T10:21:11+08:00">2018-01-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">golang</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://blog.minio.io/golang-internals-part-2-nice-benefits-of-named-return-values-1e95305c8687">Golang Internals Part 2: Nice benefits of named return values</a></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> objectInfo <span class="keyword">struct</span> &#123;</span><br><span class="line">	arg1 <span class="keyword">int64</span></span><br><span class="line">	arg2 <span class="keyword">uint64</span></span><br><span class="line">	arg3 <span class="keyword">string</span></span><br><span class="line">	arg4 []<span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NoNamedReturnParams</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="params">(objectInfo)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> i == <span class="number">1</span> &#123;</span><br><span class="line">		<span class="comment">// Do one thing</span></span><br><span class="line">		<span class="keyword">return</span> objectInfo&#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> i == <span class="number">2</span> &#123;</span><br><span class="line">		<span class="comment">// Do another thing</span></span><br><span class="line">		<span class="keyword">return</span> objectInfo&#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> i == <span class="number">3</span> &#123;</span><br><span class="line">		<span class="comment">// Do one more thing still</span></span><br><span class="line">		<span class="keyword">return</span> objectInfo&#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Normal return</span></span><br><span class="line">	<span class="keyword">return</span> objectInfo&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>actual code that the golang compiler generates</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;.NoNamedReturnParams t=1 size=243 args=0x40 locals=0x0</span><br><span class="line">0x0000 	TEXT	&quot;&quot;.NoNamedReturnParams(SB), $0-64</span><br><span class="line">0x0000 	MOVQ	$0, &quot;&quot;.~r1+16(FP)</span><br><span class="line">0x0009 	LEAQ	&quot;&quot;.~r1+24(FP), DI</span><br><span class="line">0x000e 	XORPS	X0, X0</span><br><span class="line">0x0011 	ADDQ	$-16, DI</span><br><span class="line">0x0015 	DUFFZERO	$288</span><br><span class="line">0x0028 	MOVQ	&quot;&quot;.i+8(FP), AX</span><br><span class="line">0x002d 	CMPQ	AX, $1</span><br><span class="line">0x0031 	JEQ	$0, 199</span><br><span class="line">0x0037 	CMPQ	AX, $2</span><br><span class="line">0x003b 	JEQ	$0, 155</span><br><span class="line">0x003d 	CMPQ	AX, $3</span><br><span class="line">0x0041 	JNE	111</span><br><span class="line">0x0043 	MOVQ	&quot;&quot;.statictmp_2(SB), AX</span><br><span class="line">0x004a 	MOVQ	AX, &quot;&quot;.~r1+16(FP)</span><br><span class="line">0x004f 	LEAQ	&quot;&quot;.~r1+24(FP), DI</span><br><span class="line">0x0054 	LEAQ	&quot;&quot;.statictmp_2+8(SB), SI</span><br><span class="line">0x005b 	DUFFCOPY	$854</span><br><span class="line">0x006e 	RET</span><br><span class="line">0x006f 	MOVQ	&quot;&quot;.statictmp_3(SB), AX</span><br><span class="line">0x0076 	MOVQ	AX, &quot;&quot;.~r1+16(FP)</span><br><span class="line">0x007b 	LEAQ	&quot;&quot;.~r1+24(FP), DI</span><br><span class="line">0x0080 	LEAQ	&quot;&quot;.statictmp_3+8(SB), SI</span><br><span class="line">0x0087 	DUFFCOPY	$854</span><br><span class="line">0x009a 	RET</span><br><span class="line">0x009b 	MOVQ	&quot;&quot;.statictmp_1(SB), AX</span><br><span class="line">0x00a2 	MOVQ	AX, &quot;&quot;.~r1+16(FP)</span><br><span class="line">0x00a7 	LEAQ	&quot;&quot;.~r1+24(FP), DI</span><br><span class="line">0x00ac 	LEAQ	&quot;&quot;.statictmp_1+8(SB), SI</span><br><span class="line">0x00b3 	DUFFCOPY	$854</span><br><span class="line">0x00c6 	RET</span><br><span class="line">0x00c7 	MOVQ	&quot;&quot;.statictmp_0(SB), AX</span><br><span class="line">0x00ce 	MOVQ	AX, &quot;&quot;.~r1+16(FP)</span><br><span class="line">0x00d3 	LEAQ	&quot;&quot;.~r1+24(FP), DI</span><br><span class="line">0x00d8 	LEAQ	&quot;&quot;.statictmp_0+8(SB), SI</span><br><span class="line">0x00df 	DUFFCOPY	$854</span><br><span class="line">0x00f2 	RET</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<blockquote>
<p>All fine and dandy, but if that looks a bit repetitive to you, you are quite right. Essentially for each of the <code>return</code> statements the object to be returned is more or less allocated/initialized (or more precisely copied via the <code>DUFFCOPY</code>macro).</p>
</blockquote>
<p>naked return feature of golang</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NamedReturnParams</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="params">(oi objectInfo)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> i == <span class="number">1</span> &#123;</span><br><span class="line">		<span class="comment">// Do one thing</span></span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> i == <span class="number">2</span> &#123;</span><br><span class="line">		<span class="comment">// Do another thing</span></span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> i == <span class="number">3</span> &#123;</span><br><span class="line">		<span class="comment">// Do one more thing still</span></span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Normal return</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>It reduces the size of the function down from <code>243</code> to <code>67</code> bytes. Also as an additional benefit you will save some CPU cycles upon exiting out because there is no need anymore to do anything in order to setup the return value.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parse credentialHeader string into its structured form.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">parseCredentialHeader</span><span class="params">(credElement <span class="keyword">string</span>)</span> <span class="params">(ch credentialHeader)</span></span> &#123;</span><br><span class="line">    creds := strings.Split(strings.TrimSpace(credElement), <span class="string">&quot;=&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(creds) != <span class="number">2</span> &#123;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> creds[<span class="number">0</span>] != <span class="string">&quot;Credential&quot;</span> &#123;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    credElements := strings.Split(strings.TrimSpace(creds[<span class="number">1</span>]), <span class="string">&quot;/&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(credElements) != <span class="number">5</span> &#123;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="literal">false</span> <span class="comment">/*!isAccessKeyValid(credElements[0])*/</span> &#123;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Save access key id.</span></span><br><span class="line">    cred := credentialHeader&#123;</span><br><span class="line">	accessKey: credElements[<span class="number">0</span>],</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> e error</span><br><span class="line">    cred.scope.date, e = time.Parse(yyyymmdd, credElements[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">if</span> e != <span class="literal">nil</span> &#123;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    cred.scope.region = credElements[<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">if</span> credElements[<span class="number">3</span>] != <span class="string">&quot;s3&quot;</span> &#123;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    cred.scope.service = credElements[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">if</span> credElements[<span class="number">4</span>] != <span class="string">&quot;aws4_request&quot;</span> &#123;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    cred.scope.request = credElements[<span class="number">4</span>]</span><br><span class="line">    <span class="keyword">return</span> cred</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>



<p>隐含的return value的方式</p>
<p>Note that actually the <code>ch</code> variable is a normal local variable just like any other local variable that is defined within the function. And as such you can change its value from the default ‘zero’ state (but of course then the modified version will be returned upon exiting out).</p>
<h4 id="others-uses-of-named-return-values"><a href="#others-uses-of-named-return-values" class="headerlink" title="others uses of named return values"></a>others uses of named return values</h4><p>As pointed out by several persons, another benefit of named return values is the use in closures (i.e. defer statements). Thus one may access the named return value in a function that is called as the result of a <code>defer</code> statement and act accordingly.</p>
<h4 id="conclusion"><a href="#conclusion" class="headerlink" title="conclusion"></a>conclusion</h4><p>So we will be gradually adopting named return values more and more, both for new code as well as for existing code.</p>
<p>future to integration with <code>gofmt</code> to modify the source automatically</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/102/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/102/">102</a><span class="page-number current">103</span><a class="page-number" href="/page/104/">104</a><span class="space">&hellip;</span><a class="page-number" href="/page/132/">132</a><a class="extend next" rel="next" href="/page/104/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="gqlxj1987"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">gqlxj1987</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">659</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">239</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">247</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
<div class="site-state-wrap motion-element subtitle">冷灯看剑，剑上几分功名？炉香无需计苍生，纵一穿烟逝，万丈云埋，孤阳还照古陵</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">gqlxj1987</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
