<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"gqlxj1987.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="DevilKing&#39;s blog">
<meta property="og:url" content="https://gqlxj1987.github.io/page/88/index.html">
<meta property="og:site_name" content="DevilKing&#39;s blog">
<meta property="og:locale">
<meta property="article:author" content="gqlxj1987">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://gqlxj1987.github.io/page/88/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>DevilKing's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">DevilKing's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">冷灯看剑，剑上几分功名？炉香无需计苍生，纵一穿烟逝，万丈云埋，孤阳还照古陵</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/06/11/goroutine-leak/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/11/goroutine-leak/" class="post-title-link" itemprop="url">Goroutine leak</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-11 14:24:13" itemprop="dateCreated datePublished" datetime="2018-06-11T14:24:13+08:00">2018-06-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">golang</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://medium.com/golangspec/goroutine-leak-400063aef468">原文链接</a></p>
<p>They leak if end up either blocked forever on I/O like channel communication or fall into infinite loops. Even blocked goroutine consumes resources so the program may use more memory than actually needed or eventually run out of memory and crash</p>
<h3 id="Sending-to-a-channel-without-receiver"><a href="#Sending-to-a-channel-without-receiver" class="headerlink" title="Sending to a channel without receiver"></a>Sending to a channel without receiver</h3><p>channel部分的操作</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/google/gops/agent&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span> err := agent.Start(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">time.Sleep(time.Hour)</span><br><span class="line">&gt; ./bin/gops</span><br><span class="line"><span class="number">12365</span>   gops    (/Users/mlowicki/projects/golang/spec/bin/gops)</span><br><span class="line"><span class="number">12336</span>*  lab     (/Users/mlowicki/projects/golang/spec/bin/lab)</span><br><span class="line">&gt; ./bin/gops vitals -p=<span class="number">12336</span></span><br><span class="line">goroutines: <span class="number">14</span></span><br><span class="line">OS threads: <span class="number">9</span></span><br><span class="line">GOMAXPROCS: <span class="number">4</span></span><br><span class="line">num CPU: <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>通过gops的引入</p>
<p>runtime.Stack的方式</p>
<p>Stack formats a stack trace of the calling goroutine into buf and returns the number of bytes written to buf. If all is true, Stack formats stack traces of all other goroutines into buf after the trace for the current goroutine.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/06/06/custom-application-monitoring-for-go/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/06/custom-application-monitoring-for-go/" class="post-title-link" itemprop="url">custom application monitoring for go</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-06 17:01:25" itemprop="dateCreated datePublished" datetime="2018-06-06T17:01:25+08:00">2018-06-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">golang</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://www.logicmonitor.com/blog/custom-application-monitoring-go/">原文链接</a></p>
<p>our TSDB backup system has several components that need to be monitored, including a metadata database, external storage, backup agents, and a centralized backup scheduler, along with with performance metrics such as network throughput, CPU utilization, memory utilization, and disk performance.</p>
<p>expose application metric</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"> <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"> <span class="string">&quot;log&quot;</span></span><br><span class="line"> <span class="string">&quot;net/http&quot;</span></span><br><span class="line"> <span class="string">&quot;runtime&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Performance</span><span class="params">(w http.ResponseWriter, req *http.Request)</span></span> &#123;</span><br><span class="line"> results := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">float32</span>)</span><br><span class="line"></span><br><span class="line"> <span class="comment">// get number of Goroutines</span></span><br><span class="line"> <span class="comment">// https://golang.org/pkg/runtime/#NumGoroutine </span></span><br><span class="line"> numRoutines := runtime.NumGoroutine()</span><br><span class="line"> results[<span class="string">&quot;GoRoutines&quot;</span>] = <span class="keyword">float32</span>(numRoutines)</span><br><span class="line"></span><br><span class="line"> <span class="comment">// get memory stats</span></span><br><span class="line"> <span class="comment">// https://golang.org/pkg/runtime/#MemStats </span></span><br><span class="line"> <span class="keyword">var</span> memStats runtime.MemStats</span><br><span class="line"> runtime.ReadMemStats(&amp;memStats)</span><br><span class="line"></span><br><span class="line"> <span class="comment">// bytes allocated and not yet freed</span></span><br><span class="line"> results[<span class="string">&quot;MemAlloc&quot;</span>] = <span class="keyword">float32</span>(memStats.Alloc) </span><br><span class="line"></span><br><span class="line"> <span class="comment">// number of frees</span></span><br><span class="line"> results[<span class="string">&quot;MemFrees&quot;</span>] = <span class="keyword">float32</span>(memStats.Frees) </span><br><span class="line"> </span><br><span class="line"> <span class="comment">// bytes allocated and not yet freed</span></span><br><span class="line"> results[<span class="string">&quot;MemHeapAlloc&quot;</span>] = <span class="keyword">float32</span>(memStats.HeapAlloc) </span><br><span class="line"> </span><br><span class="line"> <span class="comment">// bytes in idle spans</span></span><br><span class="line"> results[<span class="string">&quot;MemHeapIdle&quot;</span>] = <span class="keyword">float32</span>(memStats.HeapIdle) </span><br><span class="line"></span><br><span class="line"> <span class="comment">// bytes in non-idle span</span></span><br><span class="line"> results[<span class="string">&quot;MemHeapInUse&quot;</span>] = <span class="keyword">float32</span>(memStats.HeapInuse) </span><br><span class="line"></span><br><span class="line"> <span class="comment">// total number of allocated objects</span></span><br><span class="line"> results[<span class="string">&quot;MemHeapObjects&quot;</span>] = <span class="keyword">float32</span>(memStats.HeapObjects) </span><br><span class="line"></span><br><span class="line"> <span class="comment">// bytes obtained from system</span></span><br><span class="line"> results[<span class="string">&quot;MemHeapSys&quot;</span>] = <span class="keyword">float32</span>(memStats.HeapSys) </span><br><span class="line"></span><br><span class="line"> <span class="comment">// number of mallocs</span></span><br><span class="line"> results[<span class="string">&quot;MemMallocs&quot;</span>] = <span class="keyword">float32</span>(memStats.Mallocs) </span><br><span class="line"></span><br><span class="line"> <span class="comment">// total number of garbage collections</span></span><br><span class="line"> results[<span class="string">&quot;MemNumGc&quot;</span>] = <span class="keyword">float32</span>(memStats.NumGC) </span><br><span class="line"></span><br><span class="line"> <span class="comment">//total time that the garbage collector has paused the program</span></span><br><span class="line"> results[<span class="string">&quot;MemPauseTotalNs&quot;</span>] = <span class="keyword">float32</span>(memStats.PauseTotalNs) </span><br><span class="line"></span><br><span class="line"> <span class="comment">// bytes obtained from system </span></span><br><span class="line"> results[<span class="string">&quot;MemSys&quot;</span>] = <span class="keyword">float32</span>(memStats.Sys)</span><br><span class="line"></span><br><span class="line"> resp, err := json.Marshal(results)</span><br><span class="line"> <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">  log.Printf(<span class="string">&quot;error: couldn&#x27;t marshal queue metrics to json&quot;</span>)</span><br><span class="line">  w.WriteHeader(http.StatusInternalServerError)</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  w.Write(resp)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>将这些收集到的内容，放到TSDB里中，(json格式)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/06/06/intresting-interview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/06/intresting-interview/" class="post-title-link" itemprop="url">有意思的面试题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-06 10:58:47" itemprop="dateCreated datePublished" datetime="2018-06-06T10:58:47+08:00">2018-06-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">面试</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>mysql的索引部分：关于最左匹配部分</p>
<blockquote>
<p>在使用查询的时候遵循mysql组合索引的”最左前缀”,下面我们来分析一下 什么是最左前缀:及索引where时的条件要按照建立索引的时候字段的排序方式</p>
</blockquote>
<blockquote>
<p>1、不按索引最左列开始查询（多列索引） 例如index(‘c1’, ‘c2’, ‘c3’) where ‘c2’ = ‘aaa’ 不使用索引,where <code>c2</code> = <code>aaa</code> and <code>c3</code>=<code>sss</code> 不能使用索引</p>
</blockquote>
<blockquote>
<p>2、查询中某个列有范围查询，则其右边的所有列都无法使用查询（多列查询）</p>
</blockquote>
<blockquote>
<p>Where c1= ‘xxx’ and c2 like = ‘aa%’ and c3=’sss’ 改查询只会使用索引中的前两列,因为like是范围查询</p>
</blockquote>
<blockquote>
<p>3、不能跳过某个字段来进行查询,这样利用不到索引,比如我的sql 是 </p>
</blockquote>
<blockquote>
<p>explain select * from <code>award</code> where nickname &gt; ‘rSUQFzpkDz3R’ and account = ‘DYxJoqZq2rd7’ and created_time = 1449567822; 那么这时候他使用不到其组合索引.</p>
</blockquote>
<blockquote>
<p>因为我的索引是 (nickname, account, created_time),如果第一个字段出现 范围符号的查找,那么将不会用到索引,如果我是第二个或者第三个字段使用范围符号的查找,那么他会利用索引,利用的索引是(nickname),</p>
</blockquote>
<blockquote>
<p><strong>mysql在使用like查询的时候只有</strong>不以%开头的时候，才会使用到索引。</p>
</blockquote>
<p>给一个随时会断掉的输入流，取100个输入，保证尽可能的公平</p>
<blockquote>
<p>先取100个，再按照一定的比率，取后面的数据，同时按照一定的概率对之前选取的数据进行替换，采用类似ping-pong的机制，通过一定概率进行替换</p>
</blockquote>
<p>关于twitter的Finagle框架 rpc框架 同gRPC的区别？</p>
<blockquote>
<p>都是rpc部分的框架，</p>
</blockquote>
<p>关于goroutine的使用方面，关于使用了多少个goroutine，内存占用的情况</p>
<blockquote>
<p>可能来说，监测内存占用情况，比较合适，runtime上去计算多少个goroutine上，有点不是很实用</p>
</blockquote>
<p>go与java的区别</p>
<blockquote>
<p>关于多线程的实现方式，一个是1:1对应到操作系统的线程，一个是n:m:p的方式，</p>
<p>finally以及defer之间</p>
<p>function部分多个返回值部分</p>
<p>部署的方便性部分，二进制文件以及jar包</p>
<p>在起多线程方式上，java还有哪些方式？thread/runnable/callable、future部分</p>
</blockquote>
<p>nodejs的一些优缺点</p>
<blockquote>
<p>事件驱动，非阻塞IO，单进程，单线程，callback机制，</p>
<p>emet的方式？</p>
<p>遇到I/O操作，会再起一个线程，不跟主线程冲突，适合I/O密集型应用</p>
</blockquote>
<p>tcp的三次握手以及四次挥手</p>
<blockquote>
<p><img src="http://images.cnitblog.com/blog/88420/201402/181351206012825.png" alt="tcp"></p>
<p>tcp为全双工的，</p>
<p>简单说来是 “先关读，后关写”，一共需要四个阶段。以客户机发起关闭连接为例：</p>
<p>1.服务器读通道关闭</p>
<p>2.客户机写通道关闭 </p>
<p>3.客户机读通道关闭 </p>
<p>4.服务器写通道关闭</p>
</blockquote>
<p>IO模型</p>
<blockquote>
<p>阻塞、非阻塞，针对应用来说，非阻塞也是轮询的那种</p>
<p>IO多路复用，主要是内核给出相关的信息，如select、poll、epoll</p>
<p>异步通讯，就是服务端来控制传输，无需客户端询问的那种</p>
<p>同步过程中进程触发IO操作并等待或者轮询的去查看IO操作是否完成。异步过程中进程触发IO操作以后，直接返回，做自己的事情，IO交给内核来处理，完成后内核通知进程IO完成</p>
<p>需要做一件事能不能立即得到返回应答，如果不能立即获得返回，需要等待，那就阻塞了，否则就可以理解为非阻塞</p>
</blockquote>
<p>设计一个内存分配算法</p>
<blockquote>
<p>slab算法</p>
<p><img src="https://chyyuu.gitbooks.io/simple_os_book/content/zh/chapter-3/figures/9.png" alt="slab算法"></p>
</blockquote>
<p>分布式系统的设计几个点</p>
<blockquote>
<p>稳定性，不允许单点失效</p>
<p>尽可能减少节点间通讯开销</p>
<p>应用服务最好做成无状态的</p>
<p>CAP理论：一致性，可用性，分区容忍性(可靠性)， 带来的一个问题，是ACID理论，(原子性，一致性，隔离性，持久性)</p>
<p>选主算法方面的问题，关于paxos算法的解释，以及raft协议的阐述</p>
</blockquote>
<p>docker</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">适用于弹性部署的场景，例如抢购，秒杀，服务压力骤增，需要短时间增加容器。</span><br><span class="line"></span><br><span class="line">同时适用于分布式情况，毕竟分布式部署应用还需要考虑，单点故障的情况。</span><br><span class="line"></span><br><span class="line">还有就是异步处理任务，配合动态增减服务器，就可以节省资源，降低成本</span><br></pre></td></tr></table></figure>

<p>编排的目的：服务发现，高可用，资源管理，端口管理</p>
<p>各种编排的策略：swarm, k8s，双方提供的功能不同，</p>
</blockquote>
<p>linux中buffers和cached</p>
<blockquote>
<p>used：表示总计分配给缓存（包含buffers 与cache ）使用的数量，但其中可能部分缓存并未实际使用。</p>
<p>free：未被分配的内存。</p>
<p>shared：共享内存，一般系统不会用到，这里也不讨论。</p>
<p>buffers：系统分配但未被使用的buffers 数量。</p>
<p>cached：系统分配但未被使用的cache 数量</p>
<p>buffers是指用来给块设备做的缓冲大小，他只记录文件系统的metadata以及 tracking in-flight pages.</p>
<p>cached是用来给文件做缓冲。</p>
<p>那就是说：buffers是用来存储，目录里面有什么内容，权限等等。</p>
<p>而cached直接用来记忆我们打开的文件</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/06/04/interview-once/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/04/interview-once/" class="post-title-link" itemprop="url">面试总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-04 21:55:41" itemprop="dateCreated datePublished" datetime="2018-06-04T21:55:41+08:00">2018-06-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">面试</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>三年来的第一次面试，算是勉勉强强地过了</p>
<p>期间一些问题的回顾</p>
<ul>
<li>简历上关于新美的部分，有些太少，应该多加点，并且侧重于数据以及优化</li>
<li>创业公司，一个人干成一个大工程，要强调这部分的一个挑战性，包括技术上的挑战性，沟通上的挑战性，最后成果上的展现的挑战性</li>
<li>关于成长性的预期，是从大公司的一个螺丝钉到创业公司的独当一面，强调现有工作的全面性</li>
<li>从内部系统转向了外部系统，从并发性以及复杂性上，给出相应的答案<ul>
<li>输入法后端的并发性</li>
<li>推送系统的完备性</li>
<li>数据平台的完整性，多维度性</li>
<li>处理框架的实时性上</li>
<li>多机房部署的复杂性，以及运维上的复杂性</li>
</ul>
</li>
<li>尽量从数据上给出例子<ul>
<li>qps，接口成功率</li>
<li>推送系统的成功率，推送的及时性</li>
<li>离线处理平台部分，涉及多日志处理部分，完整性，复杂性</li>
<li>在线处理平台的实时性，框架的选择，结果的呈现</li>
<li>其他一些技术上的选择，以及成果</li>
</ul>
</li>
</ul>
<p>twitter的fingle框架-&gt; 为什么不用gRPC框架，后续来说。。</p>
<p>技术上的专家部分-&gt;广度的专家-&gt;深度上的专家</p>
<hr>
<p>继续第二面部分</p>
<p>方向上的一些兴趣点部分？</p>
<p>对于基础上的预习不够</p>
<p>简历上关于语言的写法有问题，导致很多还以为会php。。。还是关于侧重点方面，有点牵强</p>
<p>了解地多，还要了解地深，很容易给别人的感觉就是杂而不精。。</p>
<p>不过，经过这次的面试，愈发觉得谦卑的重要性，不管是大公司还是小公司，不管身处什么职位，任何人都有其平等对待的必要，而不是一种店大欺客的感觉。。。</p>
<p>面试也是一种学习和了解，摆好心态，争取自己在面试中学习到更多。。</p>
<p>同时，算法还是偏弱，还要继续刷leetcode。。。</p>
<hr>
<p>所谓的人情三面，终于体会到了。。。</p>
<p>关于业务和技术方面，最终的方向是什么？还是给什么做什么？</p>
<p>传说中的技术上的专家部分，是否还有机会？</p>
<p>关于kafka的一个整合部分，关于规范producer以及consumer部分，以及对突发流量部分的一个把控部分，还是挺有启发的。。</p>
<p>在面试的时候，不用考虑去迎合面试官，尝试去表达自己的想法，尽量坚定自己的想法，不用随着面试官去摇摆，虽然有各种压力和想法，但面试当做学习的话，也要表现自己的思路，自己优点在哪里。。尽量不要紧张。。</p>
<p>在面试中去寻找自己感兴趣的部分，觉得有用的地方。。</p>
<hr>
<p>第四范式的面试：</p>
<ul>
<li>关于内存池分配问题，多线程部分，每个线程独立一个内存池，缓存的局部性</li>
<li>算法题，还算是蒙对了。。</li>
</ul>
<p>技术经理面的时候，会问一些关于管理风格上的问题，以及自己在遇到一些不如人意的环境下，会如何处理的问题。不过，感觉还是有点没答好，关于未来的方向上，有什么遗憾之类。。</p>
<p>最后面的时候，对岗位的match程度产生了怀疑，不过自己也在介绍的时候，没有说好，只是在说明自己对于底层这块有兴趣，但是实际上的一些经验上，没有表述清楚，没有表达自己对于底层优势的部分？</p>
<p>关于业界的最佳实践部分，并不算最佳实践部分，在对于业务的方向上，去选取对业务更合适的架构，并从这其中发现更多的问题，解决这些问题，包括应用层，以及底层部分，都可以去优化。。</p>
<hr>
<p>freewheel的面试：</p>
<ul>
<li>关于数据的严谨性部分，如丢失率部分，有没有计算？</li>
<li>api gateway的方式，关于限流部分，有没有更好的方式，除了丢弃之外，通过redis来实现限流器部分，</li>
<li>关于服务的测试/上线部分，通过gor replay部分，对相关流量进行还原</li>
</ul>
<p>关于数据的lazy data问题，可能还是基于时间窗口部分，本地状态的一个概念？本地缓存的一个概念</p>
<p>规定一个时间段用于重排乱序的事件，同时也具有在一定时间段内重排乱序事件的能力</p>
<p>nosql的一些策略</p>
<ul>
<li>hbase</li>
<li>mongodb</li>
</ul>
<p>版本和索引的概念</p>
<p>基于raft协议的golang的实现部分？分布式锁的情况，其实没有说到选举部分，这一点有点没答出来，只是有一个分布式锁的状况</p>
<p>关于数据的反馈是如何来做？类似于广告的策略的改变部分？</p>
<p>后面两面部分：</p>
<p>关于数据的质量保证部分，是如何来保证，这个按照面试官的说法，没有答好，这块无非就是事前的测试部分完备性，以及事后的及时恢复性部分，事前测试的完备性，在于一个测试环境以及相关功能的测试的引入，包含流量的复制，相关代码的单测部分，功能测试，压测等等。事后的及时恢复，在于事件的及时通知问题，通知完成之后，自动恢复的部分，对相关数据以及应用的影响部分的预估。</p>
<p>说到自己的缺点的时候，有点太随意了，细节把控部分不仔细，举的例子上，对于上线后的检查部分，有点跟之前质量保证部分，有所冲突。。。有点没答好</p>
<p>关于lazy data的问题，其实做的思路都差不多，将时间戳部分能够继承到后续的数据中，方便进行数据的修正；具有一段时间时间数据的保存功能，方便进行数据的重处理功能</p>
<p>对于系统的复杂性部分，运维上，稳定性上，分布式上，还有灵活性，正确性等等。。</p>
<hr>
<p>今日头条的面试：</p>
<ul>
<li>关于基础知识的不确定，如rune&lt;-&gt;int8部分，数据库的索引部分</li>
<li>算法的顺序反了。。</li>
</ul>
<p>关于百度业务的总结，以及分拆部分，</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/06/04/ipfs-intro/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/04/ipfs-intro/" class="post-title-link" itemprop="url">IPFS Intro</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-04 11:37:13" itemprop="dateCreated datePublished" datetime="2018-06-04T11:37:13+08:00">2018-06-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ipfs/" itemprop="url" rel="index"><span itemprop="name">ipfs</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://vinta.ws/code/ipfs-the-very-slow-distributed-permanent-web.html?utm_campaign=CodeTengu&utm_medium=email&utm_source=CodeTengu_130">原文链接</a></p>
<p>IPFS stands for InterPlanetary File System, but you could simply consider it as a distributed, permanent, but ridiculously slow, not properly functioning version of web.</p>
<p>ref: <a target="_blank" rel="noopener" href="https://ipfs.io/">https://ipfs.io/</a></p>
<p>Every IPFS node’s default storage is <code>10GB</code>, and a single node could only store data it needs, which also means each node only stores a small amount of whole data on IPFS. <strong>If there is not enough nodes, your data might be distributed to no one except your own node.</strong></p>
<p><code>ipfs add</code>类似git方式？hash code的方式</p>
<p>Pinning means storing IPFS files on local node, and prevent them from getting garbage collected. Also, you could access them much quickly. You only need to do <code>ipfs pin add</code> to pin contents someone else uploaded.</p>
<p>Get files? 通过hash值去get相关的文件？</p>
<p>IPNS stands for InterPlanetary Naming System.</p>
<p>Everytime you change files under a folder, the hash of the folder also changes. So you need a static reference which always points to the latest hash of your folder. You could publish your static website (a folder) to IPNS with the static reference, which is your peer ID as well as the hash of your public key.</p>
<p>publish a  website to ipns</p>
<p>After you change something, publish it again with new hash.</p>
<h3 id="Create-a-Domain-Name-Alias-for-Your-Peer-ID"><a href="#Create-a-Domain-Name-Alias-for-Your-Peer-ID" class="headerlink" title="Create a Domain Name Alias for Your Peer ID"></a>Create a Domain Name Alias for Your Peer ID</h3><p>可以取别名，这是优于git部分的feature？</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/87/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/87/">87</a><span class="page-number current">88</span><a class="page-number" href="/page/89/">89</a><span class="space">&hellip;</span><a class="page-number" href="/page/132/">132</a><a class="extend next" rel="next" href="/page/89/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="gqlxj1987"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">gqlxj1987</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">656</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">239</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">245</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
<div class="site-state-wrap motion-element subtitle">冷灯看剑，剑上几分功名？炉香无需计苍生，纵一穿烟逝，万丈云埋，孤阳还照古陵</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">gqlxj1987</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
