<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"gqlxj1987.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="DevilKing&#39;s blog">
<meta property="og:url" content="https://gqlxj1987.github.io/page/75/index.html">
<meta property="og:site_name" content="DevilKing&#39;s blog">
<meta property="og:locale">
<meta property="article:author" content="gqlxj1987">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://gqlxj1987.github.io/page/75/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>DevilKing's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">DevilKing's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">冷灯看剑，剑上几分功名？炉香无需计苍生，纵一穿烟逝，万丈云埋，孤阳还照古陵</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/09/16/golang-map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/16/golang-map/" class="post-title-link" itemprop="url">Golang Map efficiently vs other language</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-09-16 15:35:13" itemprop="dateCreated datePublished" datetime="2018-09-16T15:35:13+08:00">2018-09-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">golang</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://dave.cheney.net/2018/05/29/how-the-go-runtime-implements-maps-efficiently-without-generics">原文链接</a></p>
<p>主要是介绍没有泛型的情况下，hashmap实现上的一些高效考虑</p>
<h3 id="Go’s-map-is-a-hashmap"><a href="#Go’s-map-is-a-hashmap" class="headerlink" title="Go’s map is a hashmap"></a>Go’s map is a hashmap</h3><p>hash function </p>
<ul>
<li>The first is <em>stability</em>. The hash function must be stable. Given the same key, your hash function must return the same answer</li>
<li>The second property is <em>good distribution</em>. Given two near identical keys, the result should be wildly different</li>
</ul>
<p> In this case our hashmap has eight buckets (as this is the value that the Go implementation uses) and each bucket can hold up to eight entries each (again drawn from the Go implementation)</p>
<p><img src="https://dave.cheney.net/wp-content/uploads/2018/05/Gocon-2018-Maps.021-624x351.png"></p>
<p><img src="https://dave.cheney.net/wp-content/uploads/2018/05/Screen-Shot-2018-05-20-at-20.25.36-624x351.png" alt="insert process"></p>
<h3 id="a-hash-map-four-properties"><a href="#a-hash-map-four-properties" class="headerlink" title="a hash map four properties"></a>a hash map four properties</h3><ol>
<li>You need a hash function for the key.</li>
<li>You need an equality function to compare keys.</li>
<li>You need to know the size of the key and,</li>
<li>You need to know the size of the value because these affect the size of the bucket structure, which the compiler needs to know, as you walk or insert into that structure, how far to advance in memory.</li>
</ol>
<h4 id="java"><a href="#java" class="headerlink" title="java"></a>java</h4><p>boxing: boolean<code>, </code>int<code>, </code>short<code>, </code>long<code>, </code>byte<code>, </code>char<code>, </code>float<code>, and </code>double  to java.lang.Object</p>
<h4 id="c-同java实现hashmap的优缺点"><a href="#c-同java实现hashmap的优缺点" class="headerlink" title="c++同java实现hashmap的优缺点"></a>c++同java实现hashmap的优缺点</h4><h5 id="c"><a href="#c" class="headerlink" title="c++"></a>c++</h5><ul>
<li>key和value的大小，在compile阶段就知道</li>
<li>可以进行inlineing</li>
<li>速度快</li>
<li>编译和代码上慢，要有不同的types</li>
</ul>
<h5 id="java-1"><a href="#java-1" class="headerlink" title="java"></a>java</h5><ul>
<li>天然有泛型的含义，一切都是object</li>
<li>同样也是缺点，boxing等方式，会增大gc的概率</li>
<li>Buckets are stored as linked lists, not sequential arrays</li>
</ul>
<h3 id="golang的实现"><a href="#golang的实现" class="headerlink" title="golang的实现"></a>golang的实现</h3><p>While we have the <code>container/&#123;list,heap&#125;</code> packages which do use the empty interface, the runtime’s map implementation does not use <code>interface&#123;&#125;</code>.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v := m[<span class="string">&quot;key&quot;</span>]     → runtime.mapaccess1(m, ”key<span class="string">&quot;, &amp;v)</span></span><br><span class="line"><span class="string">v, ok := m[&quot;</span>key<span class="string">&quot;] → runtime.mapaccess2(m, ”key”, &amp;v, &amp;ok)</span></span><br><span class="line"><span class="string">m[&quot;</span>key<span class="string">&quot;] = 9001   → runtime.mapinsert(m, ”key&quot;</span>, <span class="number">9001</span>)</span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">&quot;key&quot;</span>)  → runtime.mapdelete(m, “key”)</span><br></pre></td></tr></table></figure>

<p>实际上针对channel的操作？</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mapaccess1</span><span class="params">(t *maptype, h *hmap, key unsafe.Pointer)</span> <span class="title">unsafe</span>.<span class="title">Pointer</span></span></span><br></pre></td></tr></table></figure>

<p>在mapaccess中，指明maptype，不同于c++部分针对所有的map有不同的实现，golang部分，在compile阶段生成maptype字段</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> maptype <span class="keyword">struct</span> &#123;</span><br><span class="line">        typ           _type</span><br><span class="line">        key         *_type</span><br><span class="line">        elem        *_type</span><br><span class="line">        bucket        *_type <span class="comment">// internal type representing a hash bucket</span> </span><br><span class="line">        hmap          *_type <span class="comment">// internal type representing a hmap</span></span><br><span class="line">        keysize       <span class="keyword">uint8</span>  <span class="comment">// size of key slot</span></span><br><span class="line">        indirectkey   <span class="keyword">bool</span>   <span class="comment">// store ptr to key instead of key itself</span></span><br><span class="line">        valuesize     <span class="keyword">uint8</span>  <span class="comment">// size of value slot</span></span><br><span class="line">        indirectvalue <span class="keyword">bool</span>   <span class="comment">// store ptr to value instead of value itself</span></span><br><span class="line">        bucketsize    <span class="keyword">uint16</span> <span class="comment">// size of bucket</span></span><br><span class="line">        reflexivekey  <span class="keyword">bool</span>   <span class="comment">// true if k==k for all keys</span></span><br><span class="line">        needkeyupdate <span class="keyword">bool</span>   <span class="comment">// true if we need to update key on overwrite</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>mapaccess的功能如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mapaccess1 returns a pointer to h[key].  Never returns nil, instead</span> </span><br><span class="line"><span class="comment">// it will return a reference to the zero object for the value type if</span> </span><br><span class="line"><span class="comment">// the key is not in the map.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mapaccess1</span><span class="params">(t *maptype, h *hmap, key unsafe.Pointer)</span> <span class="title">unsafe</span>.<span class="title">Pointer</span></span> &#123; </span><br><span class="line">        <span class="keyword">if</span> h == <span class="literal">nil</span> || h.count == <span class="number">0</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> unsafe.Pointer(&amp;zeroVal[<span class="number">0</span>]) </span><br><span class="line">        &#125;</span><br><span class="line">        alg := t.key.alg</span><br><span class="line">        hash := alg.hash(key, <span class="keyword">uintptr</span>(h.hash0))</span><br><span class="line">        m := bucketMask(h.B)</span><br><span class="line">        b := (*bmap)(add(h.buckets, (hash&amp;m)*<span class="keyword">uintptr</span>(t.bucketsize)))</span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/09/15/month-conclusion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/15/month-conclusion/" class="post-title-link" itemprop="url">又是新的一段旅程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-09-15 16:03:18" itemprop="dateCreated datePublished" datetime="2018-09-15T16:03:18+08:00">2018-09-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/newlife/" itemprop="url" rel="index"><span itemprop="name">newlife</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>同样是走过新美的三年，最后的选择，也算是应验了三年前戏言的一句，跟着瀚总干。</p>
<p>不过，感觉还是自己有点想简单了，就算你是面向工资编程，但是新环境，新技术，新的人，带来的冲击还是很大。。。开始变得有点患得患失，对自己的焦虑，对自己的失望等等。。。</p>
<p>算是莫名其妙地开启这一段新的旅程，同样的，感觉自己的发展方向又变了，幸好自己还有一些java的底子，还不算太差</p>
<p>不管那些有的没的负面情绪，以自己为主，去学习，去了解，希望自己能在这段旅程收获一些东西</p>
<ul>
<li>发现新的领域，并能做出一些东西/成绩出来</li>
<li>规划自己的人生，不管是工作还是生活，想清楚自己的方向</li>
<li>养成一些好的习惯，戒掉自己的拖延症以及一些其他坏的习惯</li>
<li>拓宽自己的视野，坚守自己的原则以及信念</li>
</ul>
<p>其实，这些想法跟3年前并没有什么不同，就像之前说的那样，旅程上，去见一些人，一些事，做一些事，学一些东西，仅此而已，旅程就也够了</p>
<p>现在很大的一个问题，还是想的太多，做的还不够，写的不够多，锻炼的不够，有实际的想的不够，总结的不够，学习的不够。。。</p>
<p>领域方面：</p>
<ul>
<li>业务上，总结一些框架出来，对于系统部分的一些剥离和重构</li>
<li>机器学习的算法上，各种算法的学习和深入</li>
<li>内部工具效率方面，能够工具化自己的日常工作，去不断地提升效率</li>
<li>多写wiki，多写总结，多写想法</li>
</ul>
<p>规划方面：</p>
<ul>
<li>生活上，通过去学习身边人的想法，学习书本以及视频中的想法，去设想自己未来想要的生活</li>
</ul>
<p>习惯上：</p>
<ul>
<li>通过每周一总结，去努力地克服掉自己的拖延症，通过贴一些小纸条，来强化自己要做的事情</li>
</ul>
<p>视野上：</p>
<ul>
<li>接触各种不同的东西，敢于去改变，去接触，去了解不同的事物，改变自己的心态</li>
</ul>
<p>其实，也不知道自己这段旅程能坚持多久，说不定还过不了试用期。。哈哈。。。</p>
<p>要懂得和同事保持距离。要明白你对大多数人来说，只是大多数人之间的一个。你并没有什么特殊的。。。</p>
<p>但不管怎么样，踏踏实实地走好每一步，也算是经历过，也没啥，放轻松心态。。。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/09/10/one-week/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/10/one-week/" class="post-title-link" itemprop="url">活着</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-09-10 08:10:51" itemprop="dateCreated datePublished" datetime="2018-09-10T08:10:51+08:00">2018-09-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/weekly/" itemprop="url" rel="index"><span itemprop="name">weekly</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>日剧&lt;&lt;火花&gt;&gt;</p>
<p>只要还活着</p>
<p>就不会有坏结局</p>
<p>我们仍然在故事的中途</p>
</blockquote>
<hr>
<p>本周工作：</p>
<ul>
<li>基本完成增量DAG改造的框架</li>
<li>模板的导入与导出功能，相关项目开始上手入门</li>
</ul>
<p>本周所得：</p>
<ul>
<li>手把手教k8s的搭建部分</li>
</ul>
<p>下周工作：</p>
<ul>
<li>串联自动拼表的功能</li>
<li>部署环境部分的梳理</li>
</ul>
<p>保持学习的心态，保持谦卑，不要把以前的经验总放在心上，当成一碗白水，重新去适应新的环境，新的文化。。。</p>
<p>可能是自己习惯了单打独斗，对于协同部分，不是很适应，其实，所谓的做架构，其实就是做人的分配，以及活的分配，可能自己还是达不到这个水平吧，或者说，有点不适应搞这个，达不到所谓的预期吧。。。</p>
<p>可能还是不适合干这个打交道的事情吧，自己尽量去做，尽量去想吧，至于能不能达到，也不是自己能说清楚的，也没什么大不了的，顶多就是失败了，失败也没什么可怕的，就当是学习/体验一趟，做好心理准备就好了。。。</p>
<p>你在害怕什么？失败？达不到别人的预期的失望？自己的失望？不过是自己不行的接口罢了。。</p>
<p>保持输出，不管自己的理解是什么样子的，保证一定的wiki或者blog的编写，对自己的理解以及学习上有更大的帮助。。。</p>
<p>只要活着，就还在编写故事，不管是好的，还是坏的，都是在体验人生的一部分。。。无畏失败，尽量去体验，尝试就可以了，没什么好失去的，静静地做好自己就好了，尽自己最大的努力去活着，其他的就管不了。。</p>
<p>锻炼上，开始慢慢恢复，晚上增加keep的选项，保证一定量的运动？</p>
<p>人一过三十，十二点就变得很困。。。将一些时间点移到早上，在早上进行学习等等。。。</p>
<p>为自己的行为负责，孤独地活下去。。。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/09/09/Kubernetes-Best-Practices-with-Sandeep-Dinesh/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/09/Kubernetes-Best-Practices-with-Sandeep-Dinesh/" class="post-title-link" itemprop="url">Kubernetes Best Practices Tips</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-09-09 22:28:26" itemprop="dateCreated datePublished" datetime="2018-09-09T22:28:26+08:00">2018-09-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?utm_campaign=CodeTengu&utm_medium=email&utm_source=CodeTengu_140&v=BznjDNxp4Hs">视频地址</a></p>
<p>主要是介绍weave cloud中k8s的一些实践部分</p>
<h2 id="building-containers"><a href="#building-containers" class="headerlink" title="building containers"></a>building containers</h2><p>clair, 对镜像的静态分析</p>
<h4 id="use-the-build-pattern"><a href="#use-the-build-pattern" class="headerlink" title="use the build pattern"></a>use the build pattern</h4><p>build container -&gt; build artifact -&gt; runtime container</p>
<p>在镜像中，尽量使用非root用户？yaml中有相应的选项</p>
<h4 id="One-process-per-container"><a href="#One-process-per-container" class="headerlink" title="One process per container"></a>One process per container</h4><p>pod运行所有的process</p>
<h4 id="Don’t-restart-on-failure-Crash-cleanly-instead"><a href="#Don’t-restart-on-failure-Crash-cleanly-instead" class="headerlink" title="Don’t restart on failure. Crash cleanly instead"></a>Don’t restart on failure. Crash cleanly instead</h4><p>举的例子就是PM2运行nodejs程序，k8s会重启container，只需要返回更高的code让k8s去检测到</p>
<h4 id="log-to-stdout-and-stderr"><a href="#log-to-stdout-and-stderr" class="headerlink" title="log to stdout and stderr"></a>log to stdout and stderr</h4><h2 id="Deployments"><a href="#Deployments" class="headerlink" title="Deployments"></a>Deployments</h2><h4 id="记录每次deploy的record部分"><a href="#记录每次deploy的record部分" class="headerlink" title="记录每次deploy的record部分"></a>记录每次deploy的record部分</h4><h4 id="关于label的使用"><a href="#关于label的使用" class="headerlink" title="关于label的使用"></a>关于label的使用</h4><h4 id="Use-sidecar-containers-for-proxies-watchers-etc"><a href="#Use-sidecar-containers-for-proxies-watchers-etc" class="headerlink" title="Use sidecar containers for proxies, watchers, etc"></a>Use sidecar containers for proxies, watchers, etc</h4><p>程序只需要跟本地的端口部分打交道，由proxy去同其他部分，进行auth,rate,limiting等等相关的交互</p>
<h4 id="Don’t-use-sidecars-for-bootstarpping-Just-use-initial-container-instead"><a href="#Don’t-use-sidecars-for-bootstarpping-Just-use-initial-container-instead" class="headerlink" title="Don’t use sidecars for bootstarpping. Just use initial container instead"></a>Don’t use sidecars for bootstarpping. Just use initial container instead</h4><h4 id="Don’t-use-latest-or-no-tag"><a href="#Don’t-use-latest-or-no-tag" class="headerlink" title="Don’t use :latest or no tag"></a>Don’t use :latest or no tag</h4><h4 id="Health-check"><a href="#Health-check" class="headerlink" title="Health check"></a>Health check</h4><ul>
<li>Readiness-&gt;是否已经启动，并接收流量</li>
<li>Liveness-&gt;是否还在运行</li>
</ul>
<h2 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h2><h4 id="type-NodePort-can-be-“good-enough”"><a href="#type-NodePort-can-be-“good-enough”" class="headerlink" title="type: NodePort can be “good enough”"></a>type: NodePort can be “good enough”</h4><h3 id="map-external-services-to-internal-ones"><a href="#map-external-services-to-internal-ones" class="headerlink" title="map external services to internal ones"></a>map external services to internal ones</h3><p>内部一个点，外部一个点，从而避免内外部混用，配置文件部分也不同</p>
<h4 id="Use-Helm-Charts"><a href="#Use-Helm-Charts" class="headerlink" title="Use Helm Charts"></a>Use Helm Charts</h4><h4 id="Just-assume-that-all-your-downstream-dependencies-are-unreliable"><a href="#Just-assume-that-all-your-downstream-dependencies-are-unreliable" class="headerlink" title="Just assume that all your downstream dependencies are unreliable"></a>Just assume that all your downstream dependencies are unreliable</h4><h4 id="Use-a-“Service-Mesh”"><a href="#Use-a-“Service-Mesh”" class="headerlink" title="Use a “Service Mesh”"></a>Use a “Service Mesh”</h4><p>istio 或者linkerd部分？可以无缝接到你的container部分</p>
<h4 id="Use-Namespaces-to-split-up-your-cluster"><a href="#Use-Namespaces-to-split-up-your-cluster" class="headerlink" title="Use Namespaces to split up your cluster"></a>Use Namespaces to split up your cluster</h4><h4 id="Unleash-the-chaos-monkey"><a href="#Unleash-the-chaos-monkey" class="headerlink" title="Unleash the chaos monkey"></a>Unleash the chaos monkey</h4><p>?</p>
<h2 id="Challenges-on-K8s-Cluster"><a href="#Challenges-on-K8s-Cluster" class="headerlink" title="Challenges on K8s Cluster"></a>Challenges on K8s Cluster</h2><h3 id="Infrastructure的版本控制"><a href="#Infrastructure的版本控制" class="headerlink" title="Infrastructure的版本控制"></a>Infrastructure的版本控制</h3><p>Terraform to configure infrastructure</p>
<p>Kubediff</p>
<h3 id="Continuous-Delivery"><a href="#Continuous-Delivery" class="headerlink" title="Continuous Delivery"></a>Continuous Delivery</h3><p>branch and commit Id in the image tag</p>
<p><a target="_blank" rel="noopener" href="https://github.com/weaveworks/flux">一个工具flux</a></p>
<p>###关于报警和监控部分</p>
<p>使用k8s的服务发现，tsdb部分的存储，pull vs push</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2018/09/09/go-javascript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/09/go-javascript/" class="post-title-link" itemprop="url">Go 兼容Javascript</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-09-09 16:42:05" itemprop="dateCreated datePublished" datetime="2018-09-09T16:42:05+08:00">2018-09-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">golang</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://github.com/robertkrimen/otto">repo地址</a></p>
<p>该repo，相当于实现了一个小型简单的javascript的vm，用于运行javascript</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/74/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/74/">74</a><span class="page-number current">75</span><a class="page-number" href="/page/76/">76</a><span class="space">&hellip;</span><a class="page-number" href="/page/132/">132</a><a class="extend next" rel="next" href="/page/76/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">gqlxj1987</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
