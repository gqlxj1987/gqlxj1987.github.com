<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"gqlxj1987.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="DevilKing&#39;s blog">
<meta property="og:url" content="https://gqlxj1987.github.io/page/22/index.html">
<meta property="og:site_name" content="DevilKing&#39;s blog">
<meta property="og:locale">
<meta property="article:author" content="gqlxj1987">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://gqlxj1987.github.io/page/22/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>DevilKing's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">DevilKing's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">冷灯看剑，剑上几分功名？炉香无需计苍生，纵一穿烟逝，万丈云埋，孤阳还照古陵</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2020/03/16/BDD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/16/BDD/" class="post-title-link" itemprop="url">Writing Tests in Plain English</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-16 19:06:30" itemprop="dateCreated datePublished" datetime="2020-03-16T19:06:30+08:00">2020-03-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E2%80%9CBDD%E2%80%9D/" itemprop="url" rel="index"><span itemprop="name">“BDD”</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://open.nytimes.com/no-code-no-problem-writing-tests-in-plain-english-537827eaaa6e">原文链接</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.cucumber.io/gherkin/">Gherkin language</a></p>
<p>Feature files are written in a “behavior-driven” style</p>
<p>When everyone understands our user stories, we waste less time in the production process and have fewer instances where we redo the work we’ve done.</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Feature</span>: 	Update credit card</span><br><span class="line"></span><br><span class="line">Description:	As a customer care advocate, I want to update a customer’s credit card on file, so that the customer’s new credit card will be charged during the next billing cycle.</span><br><span class="line"></span><br><span class="line"><span class="keyword">Scenario</span>:	Change credit card with a valid credit card</span><br><span class="line"></span><br><span class="line">	<span class="keyword">Given</span>:	I have a customer with an existing credit card.</span><br><span class="line">	<span class="keyword">When</span>: 	I enter a new valid credit card number.</span><br><span class="line">	<span class="keyword">Then</span>:	The service request is processed successfully.</span><br><span class="line">  <span class="keyword">And</span>:	I can see that the customer’s new card is on file.</span><br><span class="line"></span><br><span class="line"><span class="keyword">Scenario</span>:	Change credit card with an invalid credit card number</span><br><span class="line"></span><br><span class="line">	<span class="keyword">Given</span>:	I have a customer with an existing credit card.</span><br><span class="line">	<span class="keyword">When</span>: 	I enter a new credit card number that is not valid.</span><br><span class="line">	<span class="keyword">Then</span>:	An error shows that the credit card number is not valid.</span><br></pre></td></tr></table></figure>



<p>The test runner parses the feature file, figures out which JavaScript functions to run and reports back.</p>
<p>document是最关键的</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2020/03/16/cat-improve/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/16/cat-improve/" class="post-title-link" itemprop="url">CAT优化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-16 18:40:26" itemprop="dateCreated datePublished" datetime="2020-03-16T18:40:26+08:00">2020-03-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/performance/" itemprop="url" rel="index"><span itemprop="name">performance</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/XvGZcW312MdatCKFMR8b">原文链接</a></p>
<p>CAT 服务端也可以认为是一个<a target="_blank" rel="noopener" href="https://databricks.com/glossary/lambda-architecture"> Lamda 架构</a>的报表系统，通过汇聚客户端上报的原始消息 MessageTree，实时计算出 Transaction、Event、Problem、heartbeat 等报表，保存在内存中； 历史报表序列化后保存到本地并上传到 DB 存储，原始上报数据压缩和建立索引后上传至 hdfs。</p>
<p>tips1: GC 方式从 CMS 改到了 G1，并调大了 heap 到 80G</p>
<p>优化方向：</p>
<ul>
<li>线程模型优化，减少上下文切换</li>
<li>内存优化</li>
<li>JVM/OS/网络优化</li>
</ul>
<p>CAT 的消息处理和线程模型，Netty Worker 线程生成 MessageTree 后，offer 到每个 Analyzer 专有队列（Blocking Queue）中，由 Analyzer 线程从队列中拉去后处理并生成对应的内存报表。</p>
<p>性能关系</p>
<p><em>Disruptor &gt; ArrayBlockingQueue &gt; LinkedBlockingQueue</em></p>
<p>利用Disruptor实现了一个简易的分组队列</p>
<p>dump，”jmap -histo $pid” 内存分析</p>
<p><strong>内存使用率 = 实际数据占用大小 / Retain Size</strong></p>
<p>利用开放地址的map，采用另外一种hash冲突解决的方式，可以减少内存的使用率</p>
<p>采用另外一种collections的实现方式</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2020/03/13/one-week/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/13/one-week/" class="post-title-link" itemprop="url">工具人</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-13 12:03:07" itemprop="dateCreated datePublished" datetime="2020-03-13T12:03:07+08:00">2020-03-13</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/weekly/" itemprop="url" rel="index"><span itemprop="name">weekly</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>工具人，不配拥有爱情，当好自己工具人的工作就好了，其他的纯属想太多了</p>
<p>呼之即来，挥之即去就行了，能当好自己的工具人，就不要做他想了</p>
<p>不是别人放弃，是自己已经放弃了自己</p>
<p>说好听的，下辈子再好好过，也就是后面再说了，过好这一生就不错了</p>
<p>也不要用什么就这样去搪塞，做好自己可以做的，过好自己能过的就可以了</p>
<p>做好自己，管好自己</p>
<p>谨记</p>
<hr>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2020/03/12/Predictive-CPU-isolation-in-Netfix/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/12/Predictive-CPU-isolation-in-Netfix/" class="post-title-link" itemprop="url">Predictive CPU isolation in Netfix</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-12 10:56:45" itemprop="dateCreated datePublished" datetime="2020-03-12T10:56:45+08:00">2020-03-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://netflixtechblog.com/predictive-cpu-isolation-of-containers-at-netflix-91f014d856c7">原文链接</a></p>
<p>In Linux, the current mainstream solution is CFS (Completely Fair  Scheduler). Its goal is to assign running processes to time slices of  the CPU in a “fair” way.</p>
<p>Maintaining performance isolation between these different applications  is critical to ensuring a good experience for internal and external  customers.</p>
<p>What the OS task scheduler is doing is essentially solving a resource  allocation problem: I have X threads to run but only Y CPUs available,  how do I allocate the threads to the CPUs to give the illusion of  concurrency?</p>
<p>Resource allocation problems can be efficiently solved through a branch  of mathematics called combinatorial optimization, used for example for  airline scheduling or logistics problems.</p>
<ul>
<li>avoid spreading a container across multiple NUMA sockets (to avoid  potentially slow cross-sockets memory accesses or page migrations)</li>
<li>don’t use hyper-threads unless you need to (to reduce L1/L2 thrashing)</li>
<li>try to even out pressure on the L3 caches (based on potential measurements of the container’s hardware usage)</li>
<li>don’t shuffle things too much between placement decisions</li>
</ul>
<p>we define three events that trigger a placement optimization:</p>
<ul>
<li><strong>add</strong>: A new container was allocated by the Titus scheduler to this instance and needs to be run</li>
<li><strong>remove</strong>: A running container just finished</li>
<li><strong>rebalance</strong>: CPU usage may have changed in the containers so we should reevaluate our placement decisions</li>
</ul>
<p>Every time a placement event is triggered, <strong>titus-isolate</strong> queries a remote optimization service (running as a Titus service, hence also isolating itself… <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Turtles_all_the_way_down">turtles all the way down</a>) which solves the container-to-threads placement problem.</p>
<p>This service then queries a local <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Gradient_boosting">GBRT</a> model (retrained every couple of hours on weeks of data collected from  the whole Titus platform) predicting the P95 CPU usage of each container in the coming 10 minutes (conditional quantile regression).</p>
<p>The model contains both contextual features (metadata associated with  the container: who launched it, image, memory and network configuration, app name…) as well as time-series features extracted from the last hour of historical CPU usage of the container collected regularly by the  host from the kernel <a target="_blank" rel="noopener" href="https://www.kernel.org/doc/Documentation/cgroup-v1/cpuacct.txt">CPU accounting controller</a>.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://gqlxj1987.github.io/2020/03/09/newbies-data-stream-processing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="gqlxj1987">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevilKing's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/09/newbies-data-stream-processing/" class="post-title-link" itemprop="url">Newbies data stream processing</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-09 12:19:00" itemprop="dateCreated datePublished" datetime="2020-03-09T12:19:00+08:00">2020-03-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/kafka/" itemprop="url" rel="index"><span itemprop="name">kafka</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://medium.com/high-alpha/data-stream-processing-for-newbies-with-kafka-ksql-and-postgres-c30309cfaaf8">原文链接</a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> STREAM admission_src (student_id <span class="type">INTEGER</span>, gre <span class="type">INTEGER</span>, toefl <span class="type">INTEGER</span>, cpga <span class="keyword">DOUBLE</span>, admit_chance <span class="keyword">DOUBLE</span>) \</span><br><span class="line"><span class="keyword">WITH</span> (KAFKA_TOPIC<span class="operator">=</span>’dbserver1.public.admission’, VALUE_FORMAT<span class="operator">=</span>’AVRO’);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> STREAM admission_src_rekey <span class="keyword">WITH</span> (PARTITIONS<span class="operator">=</span><span class="number">1</span>) <span class="keyword">AS</span> \</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> admission_src <span class="keyword">PARTITION</span> <span class="keyword">BY</span> student_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> STREAMS;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> admission (student_id <span class="type">INTEGER</span>, gre <span class="type">INTEGER</span>, toefl <span class="type">INTEGER</span>, cpga <span class="keyword">DOUBLE</span>, admit_chance <span class="keyword">DOUBLE</span>)\</span><br><span class="line"><span class="keyword">WITH</span> (KAFKA_TOPIC<span class="operator">=</span>’ADMISSION_SRC_REKEY’, VALUE_FORMAT<span class="operator">=</span>’AVRO’, KEY<span class="operator">=</span>’student_id’);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> STREAM research_src (student_id <span class="type">INTEGER</span>, rating <span class="type">INTEGER</span>, research <span class="type">INTEGER</span>)\</span><br><span class="line"><span class="keyword">WITH</span> (KAFKA_TOPIC<span class="operator">=</span>’dbserver1.public.research’, VALUE_FORMAT<span class="operator">=</span>’AVRO’);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> STREAM research_src_rekey <span class="keyword">WITH</span> (PARTITIONS<span class="operator">=</span><span class="number">1</span>) <span class="keyword">AS</span> \</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> research_src <span class="keyword">PARTITION</span> <span class="keyword">BY</span> student_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> research (student_id <span class="type">INTEGER</span>, rating <span class="type">INTEGER</span>, research <span class="type">INTEGER</span>)\</span><br><span class="line"><span class="keyword">WITH</span> (KAFKA_TOPIC<span class="operator">=</span>’RESEARCH_SRC_REKEY’, VALUE_FORMAT<span class="operator">=</span>’AVRO’, KEY<span class="operator">=</span>’student_id’);</span><br></pre></td></tr></table></figure>

<p>The table and stream names I’ve used above are lowercase, but currently  KSQL will enforce uppercase casing convention for stream, table, and  field names no matter what. (KSQL也有这个问题？)</p>
<h2 id="Kafka-monitor"><a href="#Kafka-monitor" class="headerlink" title="Kafka monitor"></a>Kafka monitor</h2><p><a target="_blank" rel="noopener" href="https://medium.com/activewizards-machine-learning-company/kafka-monitoring-with-prometheus-telegraf-and-grafana-6228fed736f1">原文链接2</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo wget -P /opt/kafka/prometheus/ https://repo1.maven.org/maven2/io/prometheus/jmx/jmx_prometheus_javaagent/0.3.0/jmx_prometheus_javaagent-0.3.0.jar</span><br><span class="line">sudo wget -P /opt/kafka/prometheus/ https://raw.githubusercontent.com/prometheus/jmx_exporter/master/example_configs/kafka-0-8-2.yml</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/21/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span><a class="page-number" href="/page/23/">23</a><span class="space">&hellip;</span><a class="page-number" href="/page/129/">129</a><a class="extend next" rel="next" href="/page/23/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="gqlxj1987"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">gqlxj1987</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">645</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">236</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">240</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
<div class="site-state-wrap motion-element subtitle">冷灯看剑，剑上几分功名？炉香无需计苍生，纵一穿烟逝，万丈云埋，孤阳还照古陵</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">gqlxj1987</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
